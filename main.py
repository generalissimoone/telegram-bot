import telebot 
import random
import os

bot = telebot.TeleBot('7022386893:AAE_7Is6Lo08iobq-5-CdZBq8eDnFzp8koA')


# –ò–Ω–¥–µ–∫—Å –ø—Ä–∞–∫—Ç–∏–∫–∏
current_practice_index = {}

# –î–ª—è —Ü–∏—Ç–∞—Ç
def read_quotes(filename):
    with open(filename, 'r', encoding='utf-8') as file:
        quotes = [line.strip() for line in file]
    return quotes

# –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
quotes_file = 'D:/telegrambot/quotes.txt'
quotes = read_quotes(quotes_file)
lessons_folder = 'D:/telegrambot/lessons/'

# –î–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á–µ–ª–æ–≤–µ–∫–∞ –≤ —É—Ä–æ–∫–∞—Ö
current_lesson = {}

# –í—Å–µ —É—Ä–æ–∫–∏
lesson_info = {
    1: "–£—Ä–æ–∫ #1. –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è, –æ—Ç –∫–æ—Ç–æ—Ä–æ–π –∑–∞–≤–∏—Å–∏—Ç —É—Å–ø–µ—Ö —Ä–µ—á–∏.",
    2: "–£—Ä–æ–∫ #2. –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è.",
    3: "–£—Ä–æ–∫ #3. –ö–∞–∫ –≤–µ—Å—Ç–∏ —Å–µ–±—è –≤ –∫–∞–¥—Ä–µ",
    4: "–£—Ä–æ–∫ #4. –°–ª–æ–≤–∞—Ä–Ω—ã–π –∑–∞–ø–∞—Å",
    5: "–£—Ä–æ–∫ #5. –°–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã",
    6: "–£—Ä–æ–∫ #6. –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏ –∏ –ø–∞—É–∑—ã",
    7: "–£—Ä–æ–∫ #7. –ò–Ω—Ç–æ–Ω–∞—Ü–∏—è",
    8: "–£—Ä–æ–∫ #8. –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –∏ –∫–∞–∫ –∑–∞–∫–æ–Ω—á–∏—Ç—å —Ä–µ—á—å",
    9: "–£—Ä–æ–∫ #9. –°—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥",
    10: "–£—Ä–æ–∫ #10. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–ø–∏–∫–µ—Ä–∞",
    11: "–£—Ä–æ–∫ #11. –ö–∞–∫ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å –≤–æ–ª–Ω–µ–Ω–∏–µ–º –∏ —Å—Ç—Ä–∞—Ö–æ–º –≤–æ –≤—Ä–µ–º—è –æ–±—â–µ–Ω–∏—è –∏ –ø—É–±–ª–∏—á–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π",
    12: "–£—Ä–æ–∫ #12. –°–∞–º–æ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è",
    13: "–£—Ä–æ–∫ #13. –û—à–∏–±–∫–∏ —Å–∞–º–æ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏",
    14: "–£—Ä–æ–∫ #14. –í–æ–ø—Ä–æ—Å—ã –∏ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è ",
    15: "–£—Ä–æ–∫ #15. SERMON",
    16: "–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –æ–±—É—á–µ–Ω–∏–µüôåüèª",
}

@bot.message_handler(commands=['start'])
def start_message(message):
    welcome_message = """–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
üéô –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å –≤ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º –±–æ—Ç–µ! –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–∞—à–µ–≥–æ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞.

üìö –ù–∞—á–Ω–∏—Ç–µ —Å —Ä–∞–∑–¥–µ–ª–∞ "–û–±—É—á–µ–Ω–∏–µ", —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ —Ç–æ–º, –∫–∞–∫ —Å—Ç–∞—Ç—å –±–æ–ª–µ–µ —É–≤–µ—Ä–µ–Ω–Ω—ã–º –æ—Ä–∞—Ç–æ—Ä–æ–º.

üí¨ –í —Ä–∞–∑–¥–µ–ª–µ "–ü—Ä–∞–∫—Ç–∏–∫–∞" –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ç—Ç–∞—á–∏–≤–∞—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ.

üì∞ "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ" –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ —Ü–∏—Ç–∞—Ç—ã, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–∞—à—É –º–æ—Ç–∏–≤–∞—Ü–∏—é.

üìñ –í —Ä–∞–∑–¥–µ–ª–µ "–†–µ—Å—É—Ä—Å—ã" –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–Ω–∏–≥–∏ –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞.

‚ùì –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –∑–∞–¥–∞–≤–∞—Ç—å –∏—Ö, –ø–∏—à–∏—Ç–µ –∞–¥–º–∏–Ω–∞–º!(@generalissimoone, @uvdmlx)

–£–¥–∞—á–∏ –≤ –≤–∞—à–µ–º –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–∏! üöÄ"""
    bot.send_message(message.chat.id, welcome_message)

    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    item1 = telebot.types.KeyboardButton("–û–±—É—á–µ–Ω–∏–µüßë‚Äçüéì")
    item2 = telebot.types.KeyboardButton("–ü—Ä–∞–∫—Ç–∏–∫–∞üìì")
    item3 = telebot.types.KeyboardButton("–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µüí°")
    item4 = telebot.types.KeyboardButton("–†–µ—Å—É—Ä—Å—ãüìö")
    markup.add(item1, item2, item3, item4)
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é:", reply_markup=markup)


@bot.message_handler(content_types=['text'])
def handle_text(message):
    if message.text == "–û–±—É—á–µ–Ω–∏–µüßë‚Äçüéì":
        send_lesson(message)
    elif message.text == "–ü—Ä–∞–∫—Ç–∏–∫–∞üìì":
        send_practice(message)
    elif message.text == "–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µüí°":
        random_quote = random.choice(quotes)
        bot.send_message(message.chat.id, random_quote)
    elif message.text == "–†–µ—Å—É—Ä—Å—ãüìö":
        with open('D:/telegrambot/resourse.txt', 'r', encoding='utf-8') as file:
            file_content = file.read()
        bot.send_message(message.chat.id, file_content)
    else:
        bot.send_message(message.chat.id, "–Ø —É–º–µ—é —á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–∏ –∏–∑ –º–µ–Ω—é, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∏–ºüôÉ")


def send_practice(message):
    user_id = message.chat.id
    current_index = current_practice_index.get(user_id, 0)
    bot.send_message(user_id, practice_texts[current_index])
    current_practice_index[user_id] = (current_index + 1) % len(practice_texts)

    #–£—Ä–æ–∫
def send_lesson(message):
    current_lesson_number = current_lesson.get(message.chat.id, 1)
    lesson_text = lesson_info.get(current_lesson_number, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Ä–æ–∫–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.")
    bot.send_message(message.chat.id, lesson_text)

    lesson_file_path = os.path.join(lessons_folder, f"lesson_{current_lesson_number}.pdf")
    if os.path.exists(lesson_file_path):
        bot.send_document(message.chat.id, open(lesson_file_path, 'rb'))
        current_lesson[message.chat.id] = current_lesson_number + 1
    else:
        bot.send_message(message.chat.id, "–ù–æ–≤—ã—Ö —É—Ä–æ–∫–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç, –Ω–æ –º—ã –æ–±–µ—â–∞–µ–º –¥–æ–±–∞–≤–∏—Ç—å –∏—Ö –≤ —Å–∫–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏üôÉ")


        #–ü—Ä–∞–∫—Ç–∏–∫–∞ –≤–æ–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç
practice_texts = ["–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–µ–ª–æ–¥–≤–∏–∂–µ–Ω–∏—è –≤ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ?", "–î–≤–∏–∂–µ–Ω–∏—è —Ç–µ–ª–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–ª—è –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è —Ä–µ—á–∏", "–ß—Ç–æ —Ç–∞–∫–æ–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∑–∞–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ä–µ—á–∏?","–ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏–∏", "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–∞—É–∑–∞ –≤ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–π —Ä–µ—á–∏?", "–ö–æ—Ä–æ—Ç–∫–∞—è –ø–∞—É–∑–∞ –¥–ª—è —ç–º—Ñ–∞–∑—ã –∏–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É —Ä–µ—á–∏","–ß—Ç–æ —Ç–∞–∫–æ–µ ¬´–∫–∞–Ω–∞–ª—ã –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏¬ª –≤ –æ—Ä–∞—Ç–æ—Ä—Å–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ?", "–†–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: —Å–ª–æ–≤–∞, –∂–µ—Å—Ç—ã, –∏–Ω—Ç–æ–Ω–∞—Ü–∏—è –∏ —Ç. –¥.", "–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∞–¥—Ä–µ—Å–æ–≤–∞—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏—é –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã—Ö –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–π?","–ß—Ä–µ–∑–º–µ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ —É–∑–∫–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.", "–ö–∞–∫–æ–≤–∞ —Ä–æ–ª—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ –ø—É–±–ª–∏—á–Ω–æ–º—É –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—é?", "–û—Å–æ–∑–Ω–∞–Ω–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–µ—Ä–≤–æ–∑–Ω–æ—Å—Ç–∏"]  

bot.polling()